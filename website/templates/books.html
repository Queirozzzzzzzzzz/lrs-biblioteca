{% extends 'base.html' %}

{% load static %}

{% block content %}

<!-- Filtro -->

<form>
    <label>Filtrar por:</label>
    <div>
        <input type="checkbox" id="filtro_todos" name="filtro" value="todos">
        <label for="filtro_todos">Todos</label>
    </div>
    <div>
        <input type="checkbox" id="filtro_em_breve" name="filtro" value="em_breve">
        <label for="filtro_em_breve">Em Breve</label>
    </div>
    <div>
        <input type="checkbox" id="filtro_disponiveis" name="filtro" value="disponiveis">
        <label for="filtro_disponiveis">Disponíveis</label>
    </div>
    <div>
        <input type="checkbox" id="filtro_indisponiveis" name="filtro" value="indisponiveis">
        <label for="filtro_indisponiveis">Indisponíveis</label>
    </div>
    <div>
        <input type="checkbox" id="filtro_lista_desejos" name="filtro" value="lista_desejos">
        <label for="filtro_lista_desejos">Lista de Desejos</label>
    </div>
    <button>Filtrar</button>
</form>

<!-- LIVROS -->

    <span class="background">
        
        <section class="gallery">
            <h3 class="secao">Livros disponíveis</h3>
            {% for book in all_books %}
            {% if book.is_available %}
            <article class="card">
                <button onclick="OpenBookModal('{{book.title|escapejs}}', '{{book.author|escapejs}}', '{{book.synopsis|escapejs}}', '{{book.release_date|escapejs}}', '{{book.is_available|escapejs}}', '{{book.stock|escapejs}}', '{{ book.id }}')">
                    {% if book.front_cover %}
                    <img src="{{book.front_cover.url}}" alt="Capa">
                    {% else %}
                    <img src="" alt="Capa padrão">
                    {% endif %}
                </button>
            </article>
            {% endif %}
            {% endfor %}
        </section>
        
    </span>

    <!-- Modal -->
    <div id="id_book-modal" class="book-modal" style="display: none;">

        <!-- Conteúdo do Modal -->
        <span class="close">&times;</span>
        <div id="id_book_modal_form" class="book-modal-content">
        </div>          
        <form action="{% url 'bookloan' %}" method="POST">
            {% csrf_token %}
            <input type="hidden" id="date_id" name="date" value="01/01/01">
            <input type="hidden" id="user_id" name="user" value="{{ user.id }}">
            <input type="hidden" id="book_id" name="book" value="">
            <button type="submit">Realizar empréstimo</button>
        </form> 
        <button>+ Lista de Desejos</button>
        {% if user.is_staff %}
            <button onclick="location.href='{% url 'bookedit' %}'">Editar</button>
        {% endif %}

    </div>
    <script src="{% static 'js/book.js' %}"></script>
{% endblock %}